"use strict";

exports.__esModule = true;
exports["default"] = void 0;

var _redux = require("redux");

var _reduxLogger = require("redux-logger");

var _reduxThunk = _interopRequireDefault(require("redux-thunk"));

var _message = require("./message");

var _session = require("./session");

var _globalProps = require("./globalProps");

var _thread = require("./thread");

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

var logger = (0, _reduxLogger.createLogger)();
var rootReducer = (0, _redux.combineReducers)({
  global: _globalProps.globalPropsReducer,
  session: _session.sessionReducer,
  message: _message.messageReducer,
  thread: _thread.threadReducer
});
var middlewares = [_reduxThunk["default"], logger];
var enhancers = [];
enhancers.push(_redux.applyMiddleware.apply(void 0, middlewares));

var resetReducer = function resetReducer(state, action) {
  if (action.type === 'LOGOUT') {
    state = undefined;
  }

  return rootReducer(state, action);
};

var uikit_store = (0, _redux.createStore)(resetReducer, _redux.compose.apply(void 0, enhancers));
window.uikit_store = uikit_store;
var _default = uikit_store;
exports["default"] = _default;
module.exports = exports.default;