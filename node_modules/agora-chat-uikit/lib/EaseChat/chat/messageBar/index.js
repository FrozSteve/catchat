"use strict";

exports.__esModule = true;
exports["default"] = void 0;

var _regenerator = _interopRequireDefault(require("@babel/runtime/regenerator"));

var _react = _interopRequireWildcard(require("react"));

var _index = require("../../../EaseApp/index");

var _core = require("@material-ui/core");

var _Toolbar = _interopRequireDefault(require("@material-ui/core/Toolbar"));

var _Typography = _interopRequireDefault(require("@material-ui/core/Typography"));

var _styles = require("@material-ui/styles");

var _Avatar = _interopRequireDefault(require("@material-ui/core/Avatar"));

var _Box = _interopRequireDefault(require("@material-ui/core/Box"));

var _i18next = _interopRequireDefault(require("i18next"));

var _message = _interopRequireDefault(require("../../../redux/message"));

var _session = _interopRequireDefault(require("../../../redux/session"));

var _thread = _interopRequireDefault(require("../../../redux/thread"));

var _globalProps = _interopRequireDefault(require("../../../redux/globalProps"));

var _index2 = _interopRequireDefault(require("../../thread/threadList/index.js"));

var _index3 = require("../index");

var _lodash = _interopRequireDefault(require("lodash"));

var _avatar = _interopRequireDefault(require("../../../common/images/avatar1.jpg"));

var _avatar2 = _interopRequireDefault(require("../../../common/images/avatar2.jpg"));

var _avatar3 = _interopRequireDefault(require("../../../common/images/avatar3.jpg"));

var _avatar4 = _interopRequireDefault(require("../../../common/images/avatar4.jpg"));

var _avatar5 = _interopRequireDefault(require("../../../common/images/avatar5.jpg"));

var _avatar6 = _interopRequireDefault(require("../../../common/images/avatar6.jpg"));

var _avatar7 = _interopRequireDefault(require("../../../common/images/avatar7.jpg"));

var _avatar8 = _interopRequireDefault(require("../../../common/images/avatar11.jpg"));

var _groupAvatar = _interopRequireDefault(require("../../../common/images/groupAvatar.png"));

var _chatCallkit = _interopRequireDefault(require("chat-callkit"));

var _WebIM = _interopRequireDefault(require("../../../utils/WebIM"));

var _inviteModal = _interopRequireDefault(require("./inviteModal"));

var _thread2 = _interopRequireDefault(require("../../../common/images/thread.png"));

var _Offline = _interopRequireDefault(require("../../../common/images/Offline.png"));

var _Online = _interopRequireDefault(require("../../../common/images/Online.png"));

var _Busy = _interopRequireDefault(require("../../../common/images/Busy.png"));

var _Do_not_Disturb = _interopRequireDefault(require("../../../common/images/Do_not_Disturb.png"));

var _custom = _interopRequireDefault(require("../../../common/images/custom.png"));

var _leave = _interopRequireDefault(require("../../../common/images/leave.png"));

var _gray2x = _interopRequireDefault(require("../../../common/images/gray@2x.png"));

var _reaction_delete2x = _interopRequireDefault(require("../../../common/icons/reaction_delete@2x.png"));

var _menu2x = _interopRequireDefault(require("../../../common/icons/menu@2x.png"));

var _delete2x = _interopRequireDefault(require("../../../common/icons/delete@2x.png"));

var _clear2x = _interopRequireDefault(require("../../../common/icons/clear@2x.png"));

function _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== "function") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function _getRequireWildcardCache(nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }

function _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== "object" && typeof obj !== "function") { return { "default": obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== "default" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj["default"] = obj; if (cache) { cache.set(obj, newObj); } return newObj; }

function _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { "default": obj }; }

function asyncGeneratorStep(gen, resolve, reject, _next, _throw, key, arg) { try { var info = gen[key](arg); var value = info.value; } catch (error) { reject(error); return; } if (info.done) { resolve(value); } else { Promise.resolve(value).then(_next, _throw); } }

function _asyncToGenerator(fn) { return function () { var self = this, args = arguments; return new Promise(function (resolve, reject) { var gen = fn.apply(self, args); function _next(value) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "next", value); } function _throw(err) { asyncGeneratorStep(gen, resolve, reject, _next, _throw, "throw", err); } _next(undefined); }); }; }

var useStyles = (0, _styles.makeStyles)(function (theme) {
  return {
    root: {
      display: "flex",
      zIndex: "999",
      width: "100%",
      height: "60px",
      maxHeight: "60px",
      minHeight: "40px",
      justifyContent: "space-between",
      alignItems: "center",
      // padding: "0 10px",
      backdropFilter: 'blur(32px)',
      background: 'rgba(255,255,255,.8)'
    },
    leftBar: {
      display: "flex",
      alignItems: "center",
      position: 'relative'
    },
    avatar: {
      margin: "0 12px 0 16px"
    },
    imgBox: {
      position: 'absolute',
      bottom: '0px',
      left: '45px',
      zIndex: 1,
      borderRadius: '50%',
      width: '17px',
      height: '17px',
      lineHeight: '21px',
      textAlign: 'center',
      background: '#fff'
    },
    imgStyle: {
      width: '15px',
      height: '15px',
      borderRadius: '50%'
    },
    muteImgStyle: {
      width: '12px',
      marginLeft: '2px',
      height: '12px'
    },
    threadIcon: {
      width: '20px',
      height: '20px'
    },
    deleteChatImg: {
      width: '30px',
      height: '30px',
      verticalAlign: 'middle'
    },
    imgActive: {
      borderRadius: '50%',
      width: '32px',
      cursor: 'pointer',
      marginRight: '12px',
      verticalAlign: 'middle',
      '&:hover': {
        background: 'rgba(0, 0, 0, 0.04)'
      }
    },
    userStatusOnline: {
      fontFamily: 'Roboto',
      fontStyle: 'normal',
      fontWeight: ' 500',
      fontSize: '12px',
      lineHeight: '14px',
      color: '#999999'
    },
    nameStatusMuteBox: {
      textAlign: 'left'
    },
    threadBtnBox: {
      padding: '6px'
    }
  };
});
var intervalTime = null;
var timeoutTime = null;

var MessageBar = function MessageBar(_ref) {
  var _presenceExt$to, _presenceExt$to2, _presenceExt$to3, _presenceExt$to4, _presenceExt$to5, _presenceExt$to6, _presenceExt$to7;

  var showinvite = _ref.showinvite,
      onInviteClose = _ref.onInviteClose,
      confrData = _ref.confrData;
  var easeChatProps = (0, _react.useContext)(_index3.EaseChatContext);
  var onChatAvatarClick = easeChatProps.onChatAvatarClick,
      isShowRTC = easeChatProps.isShowRTC,
      getRTCToken = easeChatProps.getRTCToken,
      agoraUid = easeChatProps.agoraUid,
      getIdMap = easeChatProps.getIdMap,
      appId = easeChatProps.appId;
  var classes = useStyles();
  var dispatch = (0, _index.useDispatch)();
  var groupById = (0, _index.useSelector)(function (state) {
    var _state$group;

    return (_state$group = state.group) === null || _state$group === void 0 ? void 0 : _state$group.group.byId;
  }) || {};
  var globalProps = (0, _index.useSelector)(function (state) {
    return state.global.globalProps;
  });
  var showThread = (0, _index.useSelector)(function (state) {
    return state.thread.showThread;
  });

  var _useState = (0, _react.useState)(null),
      sessionEl = _useState[0],
      setSessionEl = _useState[1];

  var _useState2 = (0, _react.useState)(false),
      showEnter = _useState2[0],
      setShowEnter = _useState2[1];

  var showTyping = (0, _index.useSelector)(function (state) {
    return state.global.showTyping;
  });
  var chatType = globalProps.chatType,
      to = globalProps.to,
      name = globalProps.name,
      presenceExt = globalProps.presenceExt;

  var renderSessionInfoMenu = function renderSessionInfoMenu() {
    var handleClickClearMessage = function handleClickClearMessage() {
      dispatch(_message["default"].clearMessage(chatType, to));
    };

    var handleClickDeleteSession = function handleClickDeleteSession() {
      dispatch(_message["default"].clearMessage(chatType, to));
      dispatch(_session["default"].deleteSession(to));
      dispatch(_globalProps["default"].setGlobalProps({
        to: null
      }));
    };

    return /*#__PURE__*/_react["default"].createElement(_core.Menu, {
      id: "simple-menu",
      anchorEl: sessionEl,
      keepMounted: true,
      open: Boolean(sessionEl),
      onClose: function onClose() {
        return setSessionEl(null);
      }
    }, /*#__PURE__*/_react["default"].createElement(_core.MenuItem, {
      onClick: handleClickClearMessage
    }, /*#__PURE__*/_react["default"].createElement("img", {
      src: _clear2x["default"],
      alt: "",
      style: {
        width: '30px'
      }
    }), /*#__PURE__*/_react["default"].createElement(_Typography["default"], {
      variant: "inherit",
      noWrap: true
    }, _i18next["default"].t("Clear Messages"))), /*#__PURE__*/_react["default"].createElement(_core.MenuItem, {
      onClick: handleClickDeleteSession
    }, /*#__PURE__*/_react["default"].createElement(_Box["default"], {
      className: classes.menuItemIconBox
    }, /*#__PURE__*/_react["default"].createElement("img", {
      className: classes.deleteChatImg,
      src: _reaction_delete2x["default"],
      alt: ""
    })), /*#__PURE__*/_react["default"].createElement(_Typography["default"], {
      variant: "inherit",
      noWrap: true
    }, _i18next["default"].t("Delete Chat"))));
  };

  var handleSessionInfoClick = function handleSessionInfoClick(e) {
    setSessionEl(e.currentTarget);
  };

  var _useState3 = (0, _react.useState)(null),
      anchorEl = _useState3[0],
      setAnchorEl = _useState3[1];

  var onClose = function onClose() {
    setAnchorEl(null);
    dispatch(_thread["default"].setThreadListPanelDisplay(false));
  };

  var openThreadList = function openThreadList(e) {
    setAnchorEl(e.currentTarget);
  };

  var threadListAnchorEl = (0, _react.useRef)(null);
  var getUserOnlineStatus = {
    'Offline': _Offline["default"],
    'Online': _Online["default"],
    'Busy': _Busy["default"],
    'Do not Disturb': _Do_not_Disturb["default"],
    'Leave': _leave["default"],
    '': _Online["default"]
  };
  var userAvatars = {
    1: _avatar["default"],
    2: _avatar2["default"],
    3: _avatar3["default"],
    4: _avatar4["default"],
    5: _avatar5["default"],
    6: _avatar6["default"],
    7: _avatar7["default"],
    8: _avatar8["default"]
  };

  var _useState4 = (0, _react.useState)([]),
      userAvatarIndex = _useState4[0],
      setUserAvatarIndex = _useState4[1];

  var _useState5 = (0, _react.useState)([]),
      usersInfoData = _useState5[0],
      setUsersInfoData = _useState5[1];

  var _useState6 = (0, _react.useState)(false),
      inviteOpen = _useState6[0],
      setInviteOpen = _useState6[1];

  var _useState7 = (0, _react.useState)([]),
      groupMembers = _useState7[0],
      setGroupMembers = _useState7[1];

  var _useState8 = (0, _react.useState)(''),
      callType = _useState8[0],
      setCallType = _useState8[1];

  (0, _react.useEffect)(function () {
    if (to) {
      var _$find;

      var newwInfoData = localStorage.getItem("usersInfo_1.0");

      if (newwInfoData) {
        newwInfoData = JSON.parse(newwInfoData);
      }

      setUserAvatarIndex(((_$find = _lodash["default"].find(newwInfoData, {
        username: to
      })) === null || _$find === void 0 ? void 0 : _$find.userAvatar) || 8);

      if (intervalTime) {
        clearInterval(intervalTime);
      }

      intervalTime = setInterval(function () {
        var _$find2;

        var newwInfoData = localStorage.getItem("usersInfo_1.0");

        if (newwInfoData) {
          newwInfoData = JSON.parse(newwInfoData);
        }

        setUserAvatarIndex(((_$find2 = _lodash["default"].find(newwInfoData, {
          username: to
        })) === null || _$find2 === void 0 ? void 0 : _$find2.userAvatar) || 8);
      }, 500);
      timeoutTime = setTimeout(function () {
        clearInterval(intervalTime);
        clearTimeout(timeoutTime);
      }, 2000);
    }
  }, [to]);

  var callAudio = /*#__PURE__*/function () {
    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regenerator["default"].mark(function _callee() {
      var channel, members, _yield$getRTCToken, _agoraUid, accessToken, options, idMap;

      return _regenerator["default"].wrap(function _callee$(_context) {
        while (1) {
          switch (_context.prev = _context.next) {
            case 0:
              setCallType('audio');
              channel = Math.uuid(8);

              if (!(chatType === 'groupChat')) {
                _context.next = 13;
                break;
              }

              _context.next = 5;
              return getGroupMembers(to);

            case 5:
              _context.t0 = _context.sent;

              if (_context.t0) {
                _context.next = 8;
                break;
              }

              _context.t0 = [];

            case 8:
              members = _context.t0;
              setGroupMembers(members);
              setInviteOpen(true);
              _context.next = 20;
              break;

            case 13:
              _context.next = 15;
              return getRTCToken({
                channel: channel,
                username: _WebIM["default"].conn.context.userId
              });

            case 15:
              _yield$getRTCToken = _context.sent;
              _agoraUid = _yield$getRTCToken.agoraUid;
              accessToken = _yield$getRTCToken.accessToken;
              options = {
                callType: 0,
                chatType: 'singleChat',
                to: to,
                agoraUid: _agoraUid,
                message: 'Start a voice call',
                accessToken: accessToken,
                channel: channel
              };

              _chatCallkit["default"].startCall(options);

            case 20:
              _context.next = 22;
              return getIdMap({
                userId: _WebIM["default"].conn.context.userId,
                channel: channel
              });

            case 22:
              idMap = _context.sent;

              _chatCallkit["default"].setUserIdMap(idMap);

            case 24:
            case "end":
              return _context.stop();
          }
        }
      }, _callee);
    }));

    return function callAudio() {
      return _ref2.apply(this, arguments);
    };
  }();

  console.log('easeChatProps @@@@', easeChatProps);

  var callVideo = /*#__PURE__*/function () {
    var _ref3 = _asyncToGenerator( /*#__PURE__*/_regenerator["default"].mark(function _callee2() {
      var channel, _yield$getRTCToken2, agoraUid, accessToken, members, options, idMap;

      return _regenerator["default"].wrap(function _callee2$(_context2) {
        while (1) {
          switch (_context2.prev = _context2.next) {
            case 0:
              channel = Math.uuid(8);
              _context2.next = 3;
              return getRTCToken({
                channel: channel,
                // agoraId: WebIM.conn.agoraUid,
                username: _WebIM["default"].conn.context.userId
              });

            case 3:
              _yield$getRTCToken2 = _context2.sent;
              agoraUid = _yield$getRTCToken2.agoraUid;
              accessToken = _yield$getRTCToken2.accessToken;
              console.log('token', agoraUid, accessToken);
              setCallType('video');

              if (!(chatType === 'groupChat')) {
                _context2.next = 19;
                break;
              }

              _context2.next = 11;
              return getGroupMembers(to);

            case 11:
              _context2.t0 = _context2.sent;

              if (_context2.t0) {
                _context2.next = 14;
                break;
              }

              _context2.t0 = [];

            case 14:
              members = _context2.t0;
              setGroupMembers(members);
              setInviteOpen(true);
              _context2.next = 21;
              break;

            case 19:
              options = {
                callType: 1,
                chatType: 'singleChat',
                to: to,
                agoraUid: agoraUid,
                message: 'Start a video call',
                accessToken: accessToken,
                channel: channel
              };

              _chatCallkit["default"].startCall(options);

            case 21:
              _context2.next = 23;
              return getIdMap({
                userId: _WebIM["default"].conn.context.userId,
                channel: channel
              });

            case 23:
              idMap = _context2.sent;

              _chatCallkit["default"].setUserIdMap(idMap);

            case 25:
            case "end":
              return _context2.stop();
          }
        }
      }, _callee2);
    }));

    return function callVideo() {
      return _ref3.apply(this, arguments);
    };
  }();

  var startCall = /*#__PURE__*/function () {
    var _ref4 = _asyncToGenerator( /*#__PURE__*/_regenerator["default"].mark(function _callee3(members) {
      var channel, type, _yield$getRTCToken3, agoraUid, accessToken, options, idMap;

      return _regenerator["default"].wrap(function _callee3$(_context3) {
        while (1) {
          switch (_context3.prev = _context3.next) {
            case 0:
              setInviteOpen(false);
              channel = confrData.channel || Math.uuid(8);
              type = confrData.type || callType == 'audio' ? 3 : 2;
              _context3.next = 5;
              return getRTCToken({
                channel: channel,
                username: _WebIM["default"].conn.context.userId
              });

            case 5:
              _yield$getRTCToken3 = _context3.sent;
              agoraUid = _yield$getRTCToken3.agoraUid;
              accessToken = _yield$getRTCToken3.accessToken;
              options = {
                callType: type,
                chatType: 'groupChat',
                to: members,
                agoraUid: agoraUid,
                message: "Start a " + (callType == 'audio' ? 'voice' : 'video') + " call",
                groupId: to || confrData.groupId,
                groupName: confrData.groupName || name[to],
                accessToken: accessToken,
                channel: channel
              }; // 多人通话过程中发邀请的文档

              _chatCallkit["default"].startCall(options);

              _context3.next = 12;
              return getIdMap({
                userId: _WebIM["default"].conn.context.userId,
                channel: channel
              });

            case 12:
              idMap = _context3.sent;

              _chatCallkit["default"].setUserIdMap(idMap);

            case 14:
            case "end":
              return _context3.stop();
          }
        }
      }, _callee3);
    }));

    return function startCall(_x) {
      return _ref4.apply(this, arguments);
    };
  }();

  var handleInviteClose = function handleInviteClose() {
    setInviteOpen(false);
    onInviteClose && onInviteClose();
  };

  (0, _react.useEffect)(function () {
    function updateGroupMember() {
      return _updateGroupMember.apply(this, arguments);
    }

    function _updateGroupMember() {
      _updateGroupMember = _asyncToGenerator( /*#__PURE__*/_regenerator["default"].mark(function _callee4() {
        var gid, members;
        return _regenerator["default"].wrap(function _callee4$(_context4) {
          while (1) {
            switch (_context4.prev = _context4.next) {
              case 0:
                if (!(chatType === 'groupChat' || !chatType)) {
                  _context4.next = 14;
                  break;
                }

                gid = to;

                if (!to) {
                  gid = confrData.groupId;
                }

                console.log('gid', gid);

                if (gid) {
                  _context4.next = 6;
                  break;
                }

                return _context4.abrupt("return");

              case 6:
                _context4.next = 8;
                return getGroupMembers(gid);

              case 8:
                _context4.t0 = _context4.sent;

                if (_context4.t0) {
                  _context4.next = 11;
                  break;
                }

                _context4.t0 = [];

              case 11:
                members = _context4.t0;
                setGroupMembers(members);
                setInviteOpen(showinvite);

              case 14:
              case "end":
                return _context4.stop();
            }
          }
        }, _callee4);
      }));
      return _updateGroupMember.apply(this, arguments);
    }

    updateGroupMember();
  }, [showinvite]);

  var getGroupMembers = /*#__PURE__*/function () {
    var _ref5 = _asyncToGenerator( /*#__PURE__*/_regenerator["default"].mark(function _callee5(gid) {
      var data;
      return _regenerator["default"].wrap(function _callee5$(_context5) {
        while (1) {
          switch (_context5.prev = _context5.next) {
            case 0:
              _context5.next = 2;
              return _WebIM["default"].conn.listGroupMembers({
                pageNum: 1,
                pageSize: 500,
                groupId: gid
              });

            case 2:
              data = _context5.sent;
              return _context5.abrupt("return", data.data);

            case 4:
            case "end":
              return _context5.stop();
          }
        }
      }, _callee5);
    }));

    return function getGroupMembers(_x2) {
      return _ref5.apply(this, arguments);
    };
  }();

  var threadListPanelDisplay = (0, _index.useSelector)(function (state) {
    var _state$thread;

    return (_state$thread = state.thread) === null || _state$thread === void 0 ? void 0 : _state$thread.threadListPanelDisplay;
  }) || false;
  (0, _react.useEffect)(function () {
    if (threadListPanelDisplay) {
      setAnchorEl(threadListAnchorEl.current);
    } else {
      onClose();
    }
  }, [threadListPanelDisplay]);
  return /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, /*#__PURE__*/_react["default"].createElement("div", {
    className: classes.root
  }, /*#__PURE__*/_react["default"].createElement(_Box["default"], {
    position: "static",
    className: classes.leftBar
  }, /*#__PURE__*/_react["default"].createElement(_Avatar["default"], {
    className: classes.avatar,
    onClick: function onClick(e) {
      return onChatAvatarClick && onChatAvatarClick(e, {
        chatType: chatType,
        to: to
      });
    },
    src: chatType === "singleChat" ? userAvatars[userAvatarIndex] : _groupAvatar["default"],
    style: {
      borderRadius: chatType === "singleChat" ? "50%" : 'inherit'
    }
  }), chatType === "singleChat" ? /*#__PURE__*/_react["default"].createElement("div", {
    className: classes.imgBox
  }, /*#__PURE__*/_react["default"].createElement("img", {
    alt: "",
    src: presenceExt && getUserOnlineStatus[(_presenceExt$to = presenceExt[to]) === null || _presenceExt$to === void 0 ? void 0 : _presenceExt$to.ext] ? getUserOnlineStatus[(_presenceExt$to2 = presenceExt[to]) === null || _presenceExt$to2 === void 0 ? void 0 : _presenceExt$to2.ext] : _custom["default"],
    className: classes.imgStyle
  })) : null, /*#__PURE__*/_react["default"].createElement("div", {
    className: classes.nameStatusMuteBox
  }, name && name[to] || to, presenceExt && ((_presenceExt$to3 = presenceExt[to]) === null || _presenceExt$to3 === void 0 ? void 0 : _presenceExt$to3.muteFlag) ? /*#__PURE__*/_react["default"].createElement("img", {
    className: classes.muteImgStyle,
    alt: "",
    src: _gray2x["default"]
  }) : null, /*#__PURE__*/_react["default"].createElement("div", {
    className: classes.userStatusOnline
  }, chatType === "singleChat" && presenceExt && ((_presenceExt$to4 = presenceExt[to]) === null || _presenceExt$to4 === void 0 ? void 0 : _presenceExt$to4.device) && /*#__PURE__*/_react["default"].createElement("span", null, (_presenceExt$to5 = presenceExt[to]) === null || _presenceExt$to5 === void 0 ? void 0 : _presenceExt$to5.device, " ", ((_presenceExt$to6 = presenceExt[to]) === null || _presenceExt$to6 === void 0 ? void 0 : _presenceExt$to6.ext) === '' ? 'Online' : (_presenceExt$to7 = presenceExt[to]) === null || _presenceExt$to7 === void 0 ? void 0 : _presenceExt$to7.ext), showTyping && /*#__PURE__*/_react["default"].createElement("span", {
    className: classes.userStatusOnline,
    style: {
      marginLeft: '5px'
    }
  }, "Entering ...")))), /*#__PURE__*/_react["default"].createElement(_Box["default"], {
    position: "static"
  }, window.location.protocol === 'https:' && isShowRTC && /*#__PURE__*/_react["default"].createElement(_react["default"].Fragment, null, /*#__PURE__*/_react["default"].createElement(_core.IconButton, {
    onClick: callAudio,
    className: "iconfont icon-yuyin icon"
  }), /*#__PURE__*/_react["default"].createElement(_core.IconButton, {
    onClick: callVideo,
    className: "iconfont icon-shipin icon"
  })), /*#__PURE__*/_react["default"].createElement(_core.IconButton, {
    className: classes.threadBtnBox + " iconfont icon",
    style: {
      display: chatType === "groupChat" && showThread ? "inline-flex" : "none"
    },
    onClick: openThreadList,
    ref: threadListAnchorEl
  }, /*#__PURE__*/_react["default"].createElement("img", {
    alt: "",
    className: classes.threadIcon,
    src: _thread2["default"]
  })), /*#__PURE__*/_react["default"].createElement("img", {
    src: _menu2x["default"],
    className: classes.imgActive,
    style: {
      background: sessionEl ? '#ccc' : ''
    },
    onClick: handleSessionInfoClick,
    alt: ""
  })), renderSessionInfoMenu(), /*#__PURE__*/_react["default"].createElement(_index2["default"], {
    anchorEl: anchorEl,
    onClose: onClose
  })), /*#__PURE__*/_react["default"].createElement(_inviteModal["default"], {
    open: inviteOpen,
    onClose: handleInviteClose,
    onCall: startCall,
    members: groupMembers,
    joinedMembers: confrData.joinedMembers
  }));
};

var _default = MessageBar;
exports["default"] = _default;
module.exports = exports.default;